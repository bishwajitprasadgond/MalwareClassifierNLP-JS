# -*- coding: utf-8 -*-
"""
Created on Mon Nov 13 16:39:01 2023

@author: admin
"""

import pandas as pd
from sklearn.decomposition import PCA
import seaborn as sns
import matplotlib.pyplot as plt

# Load the CSV file into a DataFrame
data = pd.read_csv('D:\\0malware_analysis\\Combine\\combined_data2.csv', sep=',')

# Extract features and labels
features = data.iloc[:, 1:8]  # Columns 2 to 8 are Jaccard similarity indices
labels = data['label']

# Define the custom color palette for each class
custom_palette = {
    'adware': 'red',
    'backdoor': 'black',
    'downloader': 'green',
    'trojan': 'purple',
    'spyware': 'blue',
    'virus': 'lightgreen',
    'worm': 'orange'
}

# One-hot encode the labels
labels_encoded = pd.get_dummies(labels)

# Initialize PCA with two components
pca = PCA(n_components=2, random_state=100)

# Fit and transform the data using PCA
pca_result = pca.fit_transform(features)

# Create a DataFrame for the PCA results
pca_df = pd.DataFrame(pca_result, columns=['Principal Component 1', 'Principal Component 2'])
pca_df = pd.concat([pca_df, labels_encoded], axis=1)

# Plot the PCA results with the custom color palette
plt.figure(figsize=(10, 8))
sns.scatterplot(x='Principal Component 1', y='Principal Component 2', hue=labels, data=pca_df, palette=custom_palette, s=50)
plt.title('PCA Visualization of Malware Categories using Jaccard Similarity Indices')
plt.legend(title='Malware Category', loc='upper right')
plt.show()
